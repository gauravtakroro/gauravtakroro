# name: Update Medium Blog Posts
# on:
#   schedule:
#     - cron: "0 */6 * * *" # every 6 hours
#   workflow_dispatch:

# permissions:
#   contents: write

# jobs:
#   update-medium:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout repo
#         uses: actions/checkout@v4

#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: "18"

#       - name: Install dependencies
#         run: npm install puppeteer

#       - name: Fetch latest Medium posts with claps/views
#         run: node .github/scripts/updateMedium.js

#       - name: Commit and push if changed
#         run: |
#           git config user.name "gauravtakroro"
#           git config user.email "gaurav.tak@roro.io"
#           git add README.md
#           git diff --quiet && git diff --staged --quiet || git commit -m "ðŸ”¥ Update top Medium posts"
#           git push

name: Update Medium Blog Posts
on:
  schedule:
    - cron: "0 */6 * * *" # every 6 hours
  workflow_dispatch:

permissions:
  contents: write

jobs:
  update-medium:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "18"

      - name: Install dependencies
        run: npm install rss-parser

      - name: Fetch latest Medium posts
        run: node .github/scripts/updateMedium.js

      - name: Commit and push if changed
        run: |
          git config user.name "gauravtakroro"
          git config user.email "gaurav.tak@roro.io"
          git add README.md
          git diff --quiet && git diff --staged --quiet || git commit -m "ðŸ”„ Update Medium blog posts"
          git push
